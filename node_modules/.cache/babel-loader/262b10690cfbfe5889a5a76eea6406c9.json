{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\vlava\\\\Desktop\\\\SmartCoin\\\\tutorial1\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\vlava\\\\Desktop\\\\SmartCoin\\\\tutorial1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\vlava\\\\Desktop\\\\SmartCoin\\\\tutorial1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\vlava\\\\Desktop\\\\SmartCoin\\\\tutorial1\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react'; // import connect from '@vkontakte/vkui-connect';\n\nimport { ScreenSpinner, View, Panel, Placeholder, Button, FixedLayout, Footer, Link, ModalRoot, ModalPage, ModalPageHeader, PanelHeaderClose, SimpleCell, InfoRow, CellButton } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './panels/Home';\nimport bridge from '@vkontakte/vk-bridge';\nimport md5 from 'md5';\nimport axios from 'axios';\nvar server = \"localhost\";\n\nvar App = function App() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fetchedUserInformation = _useState4[0],\n      setUserInformation = _useState4[1];\n\n  var _useState5 = useState('null'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      activePanel = _useState6[0],\n      setActivePanel = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      activeModal = _useState8[0],\n      setActiveModal = _useState8[1];\n\n  var _useState9 = useState(React.createElement(ScreenSpinner, {\n    size: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  })),\n      _useState10 = _slicedToArray(_useState9, 2),\n      popout = _useState10[0],\n      setPopout = _useState10[1];\n\n  useEffect(function () {\n    bridge.subscribe(function (_ref) {\n      var _ref$detail = _ref.detail,\n          type = _ref$detail.type,\n          data = _ref$detail.data;\n\n      if (type === 'VKWebAppUpdateConfig') {\n        var schemeAttribute = document.createAttribute('scheme');\n        schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n        document.body.attributes.setNamedItem(schemeAttribute);\n      }\n    });\n\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var user, request;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return bridge.send(\"VKWebAppGetUserInfo\");\n\n              case 2:\n                user = _context.sent;\n                setUser(user);\n                _context.next = 6;\n                return axios.post(\"\".concat(server, \"/getUserInformation\"), {\n                  sign: window.location.search\n                });\n\n              case 6:\n                request = _context.sent;\n\n                if (!(typeof request.data !== 'object')) {\n                  _context.next = 9;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 9:\n                setUserInformation(request.data);\n                setPopout(null);\n                setActivePanel('main');\n\n                if (window.location.hash.startsWith('#ref')) {\n                  axios.post(\"\".concat(server, \"/joinRefferal\"), {\n                    sign: window.location.search,\n                    user: Number(window.location.hash.replace('#ref', ''))\n                  });\n                }\n\n                _context.next = 15;\n                return bridge.send('VKWebAppJoinGroup', {\n                  'group_id': 199554488\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, []);\n\n  var view =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (bridge.supports('VKWebAppShowNativeAds')) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 2:\n              return _context3.abrupt(\"return\", bridge.send('VKWebAppShowNativeAds', {\n                ad_format: 'preloader'\n              }).then(\n              /*#__PURE__*/\n              function () {\n                var _ref3 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee2(ad) {\n                  var key, request;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          if (ad.result) {\n                            _context2.next = 2;\n                            break;\n                          }\n\n                          return _context2.abrupt(\"return\", setActivePanel('main'));\n\n                        case 2:\n                          key = md5(\"\".concat(Math.floor(Math.random() * Math.floor(200)), \"-\").concat(Date.now(), \"-null\"));\n                          axios.post(\"\".concat(server, \"/viewAd\"), {\n                            sign: window.location.search,\n                            key: \"\".concat(key, \"-\").concat(Math.random(), \"-\").concat(Date.now())\n                          });\n                          setTimeout(function () {\n                            return setActivePanel('main');\n                          }, 3000);\n                          _context2.next = 7;\n                          return axios.post(\"\".concat(server, \"/getUserInformation\"), {\n                            sign: window.location.search\n                          });\n\n                        case 7:\n                          request = _context2.sent;\n                          setUserInformation(request.data);\n\n                        case 9:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x) {\n                  return _ref3.apply(this, arguments);\n                };\n              }()).catch(function () {\n                setActivePanel('main');\n                var key = md5(\"\".concat(Math.floor(Math.random() * Math.floor(200)), \"-\").concat(Date.now(), \"-null\"));\n                axios.post(\"\".concat(server, \"/badAd\"), {\n                  sign: window.location.search,\n                  key: \"\".concat(key, \"-\").concat(Math.random(), \"-\").concat(Date.now())\n                });\n              }));\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function view() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var declOfNum = function declOfNum(number, titles) {\n    var cases = [2, 0, 1, 1, 1, 2];\n    return titles[number % 100 > 4 && number % 100 < 20 ? 2 : cases[number % 10 < 5 ? number % 10 : 5]];\n  };\n\n  var modal = React.createElement(ModalRoot, {\n    activeModal: activeModal,\n    onClose: function onClose() {\n      return setActiveModal(null);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(ModalPage, {\n    id: \"ref\",\n    onClose: function onClose() {\n      return setActiveModal(null);\n    },\n    header: React.createElement(ModalPageHeader, {\n      right: React.createElement(PanelHeaderClose, {\n        onClick: function onClick() {\n          return setActiveModal(null);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"\\u0420\\u0435\\u0444\\u0435\\u0440\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(SimpleCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(InfoRow, {\n    header: \"\\u0417\\u0430\\u0440\\u0430\\u0431\\u043E\\u0442\\u0430\\u043D\\u043E \\u043D\\u0430 \\u0440\\u0435\\u0444\\u0435\\u0440\\u0430\\u043B\\u0430\\u0445\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, fetchedUserInformation && fetchedUserInformation.earnedByRef)), React.createElement(CellButton, {\n    before: React.createElement(Icon24Linked, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }),\n    onClick: function onClick() {\n      return bridge.send('VKWebAppCopyText', {\n        'text': \"https://vk.com/app7632685#ref\".concat(user && user.id)\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"\\u0421\\u043A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"), React.createElement(\"div\", {\n    style: {\n      height: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  })));\n  return React.createElement(View, {\n    activePanel: activePanel,\n    modal: modal,\n    popout: popout,\n    header: activePanel !== 'null',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(Panel, {\n    id: \"null\",\n    separator: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }), React.createElement(Panel, {\n    id: \"main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(Placeholder, {\n    stretched: true,\n    icon: React.createElement(Icon36LogoVk, {\n      width: 56,\n      height: 56,\n      style: {\n        color: 'var(--accent)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }),\n    action: bridge.supports('VKWebAppShowNativeAds') ? React.createElement(Button, {\n      before: React.createElement(Icon28Play, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }),\n      onClick: function onClick() {\n        return view();\n      },\n      size: \"l\",\n      mode: \"outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u0440\\u0435\\u043A\\u043B\\u0430\\u043C\\u0443\") : React.createElement(Button, {\n      size: \"l\",\n      mode: \"outline\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"\\u041F\\u043B\\u0430\\u0442\\u0444\\u043E\\u0440\\u043C\\u0430 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442\\u0441\\u044F\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"\\u0412\\u044B \\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u0440\\u0435\\u043A\\u043B\\u0430\\u043C\\u0443 \\u043A\\u0430\\u0436\\u0434\\u044B\\u0435 \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }), \" 3 \\u0441\\u0435\\u043A\\u0443\\u043D\\u0434\\u044B \\u0438 \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u043B\\u044C\\u043D\\u043E \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }), \" \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u044C VK Coin \\u043D\\u0430 \\u0441\\u0432\\u043E\\u0439 \\u0441\\u0447\\u0451\\u0442\"), React.createElement(FixedLayout, {\n    vertical: \"bottom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(Footer, {\n    onClick: function onClick() {\n      return setActiveModal('ref');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(Link, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \"\\u0420\\u0435\\u0444\\u0435\\u0440\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430\")), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"\\u0427\\u0435\\u043C \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 \\u0412\\u044B \\u0441\\u043C\\u043E\\u0442\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u043A\\u043B\\u0430\\u043C\\u0443, \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }), \" \\u0442\\u0435\\u043C \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0435\\u0442\\u0435 VK Coin :) \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }), \" \\u0414\\u043E \\u043F\\u043E\\u0432\\u044B\\u0448\\u0435\\u043D\\u0438\\u044F \\u043D\\u0430\\u0433\\u0440\\u0430\\u0434\\u044B \\u043E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C \\u043F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \", fetchedUserInformation && fetchedUserInformation.left, \" \", declOfNum(fetchedUserInformation && fetchedUserInformation.left, ['рекламу', 'рекламы', 'реклам'])))), React.createElement(Panel, {\n    id: \"wait\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(Placeholder, {\n    stretched: true,\n    icon: React.createElement(Icon28MoreHorizontal, {\n      width: 56,\n      height: 56,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u043F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435 3 \\u0441\\u0435\\u043A\\u0443\\u043D\\u0434\\u044B.\")));\n}; // class App extends React.Component {\n// \tconstructor(props) {\n// \t\tsuper(props);\n// \t\tthis.state = {\n// \t\t\tactivePanel: 'home',\n// \t\t\tfetchedUser: null,\n// \t\t\tpopout: null,\n// \t\t};\n// \t\tthis.closePopout = this.closePopout.bind(this);\n// \t};\n// \topenDefault(title, msg, actions) {\n//         this.setState({\n//             popout:\n//                 <Alert\n//                     actions={[actions]}\n//                     onClose={this.closePopout}\n//                 >   \n//                     <h2>{title}</h2>\n//                     <p>{msg}</p>\n//                 </Alert>\n//         });\n//     }\n//     closePopout() {\n//         this.setState({ popout: null });\n//     }\n//     render() {\n// \t\treturn (\n// \t\t\t<View popout={this.state.popout} activePanel={this.state.activePanel}>\n//                 <Home id=\"home\" add1={this.add1} fetchedUser={this.state.fetchedUser} balance={this.balance} />\n// \t\t\t</View>\n// \t\t);\n// \t}\n//     updateUserClicks(id) {\n//         axios.get(`http://localhost/api/editUserBalance?user_id=${id}`)\n//     }\n// \tadd1 = () => {\n//         this.updateUserClicks(this.state.fetchedUser.id)\n// \t}\n// }\n\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\vlava\\Desktop\\SmartCoin\\tutorial1\\src\\App.js"],"names":["React","useState","useEffect","ScreenSpinner","View","Panel","Placeholder","Button","FixedLayout","Footer","Link","ModalRoot","ModalPage","ModalPageHeader","PanelHeaderClose","SimpleCell","InfoRow","CellButton","Home","bridge","md5","axios","server","App","user","setUser","fetchedUserInformation","setUserInformation","activePanel","setActivePanel","activeModal","setActiveModal","popout","setPopout","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","send","post","sign","window","location","search","request","hash","startsWith","Number","replace","view","supports","ad_format","then","ad","result","key","Math","floor","random","Date","now","setTimeout","catch","declOfNum","number","titles","cases","modal","earnedByRef","id","height","color","left"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n// import connect from '@vkontakte/vkui-connect';\nimport {\n\tScreenSpinner,\n\tView,\n\tPanel,\n\tPlaceholder,\n\tButton,\n\tFixedLayout,\n\tFooter,\n\tLink,\n\tModalRoot,\n\tModalPage,\n\tModalPageHeader,\n\tPanelHeaderClose,\n\tSimpleCell,\n\tInfoRow,\n\tCellButton,\n} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './panels/Home';\nimport bridge from '@vkontakte/vk-bridge';\nimport md5 from 'md5';\nimport axios from 'axios';\n\nconst server = \"localhost\"\n\nconst App = () => {\n\n\tconst [user, setUser] = useState(null);\n\tconst [fetchedUserInformation, setUserInformation] = useState(null);\n\n\tconst [activePanel, setActivePanel] = useState('null');\n\tconst [activeModal, setActiveModal] = useState(null);\n\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n\tuseEffect(() => {\n\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\n\t\tasync function fetchData() {\n\n\t\t\tconst user = await bridge.send(\"VKWebAppGetUserInfo\");\n\t\t\tsetUser(user);\n\n\t\t\tconst request = await axios.post(`${server}/getUserInformation`, {\n\t\t\t\tsign: window.location.search\n\t\t\t});\n\n\t\t\tif (typeof request.data !== 'object') return;\n\n\t\t\tsetUserInformation(request.data);\n\t\t\tsetPopout(null);\n\t\t\tsetActivePanel('main');\n\n\t\t\tif (window.location.hash.startsWith('#ref')) {\n\t\t\t\taxios.post(`${server}/joinRefferal`, {\n\t\t\t\t\tsign: window.location.search,\n\t\t\t\t\tuser: Number(window.location.hash.replace('#ref', ''))\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tawait bridge.send('VKWebAppJoinGroup', { 'group_id': 199554488 });\n\t\t}\n\n\t\tfetchData();\n\n\t}, []);\n\n\tconst view = async () => {\n\t\tif (!bridge.supports('VKWebAppShowNativeAds')) return;\n\n\t\treturn bridge.send('VKWebAppShowNativeAds', { ad_format: 'preloader' }).then(async ad => {\n\t\t\tif (!ad.result) return setActivePanel('main');\n\n\t\t\tconst key = md5(`${Math.floor(Math.random() * Math.floor(200))}-${Date.now()}-null`);\n\n\t\t\taxios.post(`${server}/viewAd`, {\n\t\t\t\tsign: window.location.search,\n\t\t\t\tkey: `${key}-${Math.random()}-${Date.now()}`\n\t\t\t});\n\t\n\t\t\tsetTimeout(() => setActivePanel('main'), 3000);\n\t\n\t\t\tconst request = await axios.post(`${server}/getUserInformation`, {\n\t\t\t\tsign: window.location.search\n\t\t\t});\n\t\n\t\t\tsetUserInformation(request.data);\n\t\t})\n\t\t.catch(() => {\n\t\t\tsetActivePanel('main');\n\t\t\tconst key = md5(`${Math.floor(Math.random() * Math.floor(200))}-${Date.now()}-null`);\n\n\t\t\taxios.post(`${server}/badAd`, {\n\t\t\t\tsign: window.location.search,\n\t\t\t\tkey: `${key}-${Math.random()}-${Date.now()}`\n\t\t\t});\n\t\t});\n\n\t};\n\n\tconst declOfNum = (number, titles) => {  \n\t\tvar cases = [2, 0, 1, 1, 1, 2];  \n\t\treturn titles[(number % 100 > 4 && number % 100 < 20) ? 2 : cases[(number % 10 < 5) ? number % 10 : 5]];  \n\t}\n\n\tconst modal = (\n\t\t<ModalRoot activeModal={activeModal} onClose={() => setActiveModal(null)}>\n\t\t\t<ModalPage\n\t\t\t\tid='ref'\n\t\t\t\tonClose={() => setActiveModal(null)}\n\t\t\t\theader={\n\t\t\t\t\t<ModalPageHeader right={<PanelHeaderClose onClick={() => setActiveModal(null)} />}>\n\t\t\t\t\t\tРеферальная программа\n\t\t\t\t\t</ModalPageHeader>\n\t\t\t\t}\n\t\t\t>\n\n\t\t\t\t<SimpleCell>\n\t\t\t\t\t<InfoRow header='Заработано на рефералах'>\n\t\t\t\t\t\t{fetchedUserInformation && fetchedUserInformation.earnedByRef}\n\t\t\t\t\t</InfoRow>\n\t\t\t\t</SimpleCell>\n\n\t\t\t\t<CellButton before={<Icon24Linked />} onClick={() => bridge.send('VKWebAppCopyText', {'text': `https://vk.com/app7632685#ref${user && user.id}`})}>\n\t\t\t\t\tСкопировать ссылку\n\t\t\t\t</CellButton>\n\n\t\t\t\t<div style={{ height: 10 }} />\n\n\t\t\t</ModalPage>\n\t\t</ModalRoot>\n\t);\n\n\treturn (\n\t\t<View activePanel={activePanel} modal={modal} popout={popout} header={activePanel !== 'null'}>\n\n\t\t\t<Panel\n\t\t\t\tid='null'\n\t\t\t\tseparator={false}\n\t\t\t/>\n\n\t\t\t<Panel id='main'>\n\n\t\t\t\t<Placeholder\n\t\t\t\t\tstretched\n\t\t\t\t\ticon={<Icon36LogoVk width={56} height={56} style={{ color: 'var(--accent)' }} />}\n\t\t\t\t\taction={\n\t\t\t\t\t\tbridge.supports('VKWebAppShowNativeAds') \n\t\t\t\t\t\t?\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tbefore={<Icon28Play />}\n\t\t\t\t\t\t\t\tonClick={() => view()}\n\t\t\t\t\t\t\t\tsize='l'\n\t\t\t\t\t\t\t\tmode='outline'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tПосмотреть рекламу\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize='l'\n\t\t\t\t\t\t\t\tmode='outline'\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tПлатформа не поддерживается\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tВы можете смотреть рекламу каждые <br /> 3 секунды и моментально <br /> получать VK Coin на свой счёт\n\t\t\t\t</Placeholder>\n\n\t\t\t\t<FixedLayout vertical='bottom'>\n\t\t\t\t\t<Footer onClick={() => setActiveModal('ref')}><Link>Реферальная программа</Link></Footer>\n\t\t\t\t\t<Footer>Чем больше Вы смотрите рекламу, <br /> тем больше получаете VK Coin :) <br /> До повышения награды осталось посмотреть {fetchedUserInformation && fetchedUserInformation.left} {declOfNum(fetchedUserInformation && fetchedUserInformation.left, ['рекламу', 'рекламы', 'реклам'])}</Footer>\n\t\t\t\t</FixedLayout>\n\n\t\t\t</Panel>\n\n\t\t\t<Panel id='wait'>\n\t\t\t\t<Placeholder\n\t\t\t\t\tstretched\n\t\t\t\t\ticon={<Icon28MoreHorizontal width={56} height={56} />}\n\t\t\t\t>Пожалуйста, подождите 3 секунды.</Placeholder>\n\t\t\t</Panel>\n\n\t\t</View>\n\t);\n}\n\n// class App extends React.Component {\n// \tconstructor(props) {\n// \t\tsuper(props);\n\n// \t\tthis.state = {\n// \t\t\tactivePanel: 'home',\n// \t\t\tfetchedUser: null,\n// \t\t\tpopout: null,\n// \t\t};\n// \t\tthis.closePopout = this.closePopout.bind(this);\n// \t};\n\n// \topenDefault(title, msg, actions) {\n//         this.setState({\n//             popout:\n//                 <Alert\n//                     actions={[actions]}\n//                     onClose={this.closePopout}\n//                 >   \n//                     <h2>{title}</h2>\n//                     <p>{msg}</p>\n//                 </Alert>\n//         });\n//     }\n\n//     closePopout() {\n//         this.setState({ popout: null });\n//     }\n\t\n//     render() {\n// \t\treturn (\n// \t\t\t<View popout={this.state.popout} activePanel={this.state.activePanel}>\n//                 <Home id=\"home\" add1={this.add1} fetchedUser={this.state.fetchedUser} balance={this.balance} />\n// \t\t\t</View>\n// \t\t);\n// \t}\n\n//     updateUserClicks(id) {\n//         axios.get(`http://localhost/api/editUserBalance?user_id=${id}`)\n//     }\n\n// \tadd1 = () => {\n//         this.updateUserClicks(this.state.fetchedUser.id)\n// \t}\n    \n// }\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}